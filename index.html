<!DOCTYPE html>
<html>
  <head>
    <title>Stroop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./jspsych/jspsych.js"></script>
    <script src="./jspsych/plugin-html-button-response.js"></script>
    <script src="./jspsych/plugin-html-keyboard-response.js"></script>
    <link href="./jspsych/jspsych.css" rel="stylesheet" type="text/css" />
    <script src="./main.js"></script>
    <style>      
    </style>
  </head>
  <body></body>
  <script>

    /* initialize jsPsych */
    var jsPsych = initJsPsych({
        //timeline: timeline,
      on_finish: function() {
        jsPsych.data.displayData();
    }
    });

    var timeline = [];

   //array of words used as stimulus
   //edit based on population
    var suicideWords = [
      'suicide',
      'dead',
      'funeral'
    ];

     var negativeWords = [
      'alone',
      'rejected',
      'stupid'
    ];

    var neutralWords = [
      'museum',
      'paper',
      'engine'
    ];

    var positiveWords = [
      'happy',
      'success',
      'pleasure'
    ];

var practiceStimuli = [
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">red</p><br>', data:{color:'red', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">red</p><br>', data:{color:'blue', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">green</p><br>', data:{color:'red', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">green</p><br>', data:{color:'blue', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">blue</p><br>', data:{color:'blue', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">blue</p><br>', data:{color:'red', correct_response: 0}},
    ];

var stroopStimuli = [
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[0] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[0] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[0] +'</p><br>', data:{color:'blue', valence: 'suicide', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[0] +'</p><br>', data:{color:'blue', valence: 'suicide', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[1] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[1] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[1] +'</p><br>', data:{color:'blue',valence: 'suicide',  correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[1] +'</p><br>', data:{color:'blue',valence: 'suicide',  correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[2] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ suicideWords[2] +'</p><br>', data:{color:'red', valence: 'suicide', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[2] +'</p><br>', data:{color:'blue', valence: 'suicide', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ suicideWords[2] +'</p><br>', data:{color:'blue', valence: 'suicide', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[0] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[0] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[0] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[0] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[1] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[1] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[1] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[1] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[2] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ negativeWords[2] +'</p><br>', data:{color:'red', valence: 'negative', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[2] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ negativeWords[2] +'</p><br>', data:{color:'blue', valence: 'negative', correct_response: 1}},
  { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[0] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[0] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[0] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[0] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[1] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[1] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[1] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[1] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[2] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ positiveWords[2] +'</p><br>', data:{color:'red', valence: 'positive', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[2] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ positiveWords[2] +'</p><br>', data:{color:'blue', valence: 'positive', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[0] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[0] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[0] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[0] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[1] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[1] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[1] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[1] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[2] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #AA4499; font-size:60px; font-weight:bold;">'+ neutralWords[2] +'</p><br>', data:{color:'red', valence: 'neutral', correct_response: 0}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[2] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
    { stimulus: '<p style="color: #88CCEE; font-size:60px; font-weight:bold;">'+ neutralWords[2] +'</p><br>', data:{color:'blue', valence: 'neutral', correct_response: 1}},
  ];

  var practice_instructions_1 = {
        type: jsPsychHtmlButtonResponse,
        stimulus: 'In this task, words will appear on the screen in the color RED or the color BLUE.<br>If the color of the word is RED, press the <p style="color: #AA4499;font-weight:bold;">RED</p> button. <br> If the color of the word is blue, press the <p style="color: #88CCEE; font-weight:bold;">BLUE</p> button. <br>Respond as quickly and accurately as possible.<br></p>',
        choices: ['NEXT'],
    }


    var practice_instructions_2 = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>Before we start the task there will be a short practice section. <br>Respond by clicking on the COLOR of the word, as quickly and accurately as possible.<br>Click next to begin<br></p>',
        choices: ['NEXT'],
    }

    var task_instructions = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>The real task will have different words.<br><br>Continue to respond based on the COLOR of the word.<br><br>Press next to begin the task<br></p>',
        choices: ['NEXT'],
    }

var fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: '<p style="font-size:60px;">+</p>',
    choices: "NO_KEYS",
    trial_duration: 1000,
    response_ends_trial: false,
    data: {
   task: 'fixation'
      }

}

var blank1 = {
  type: jsPsychHtmlKeyboardResponse,
    stimulus: '',
    choices: "NO_KEYS",
    trial_duration: 2000,
    response_ends_trial: false,
    data: {
        task: 'blank'
      }

}

var blank2 = {
  type: jsPsychHtmlKeyboardResponse,
    stimulus: '',
    choices: "NO_KEYS",
    trial_duration: 1000,
    response_ends_trial: false,
    data: {
       task: 'blank'

      }

}

var stroop = {
    type: jsPsychHtmlButtonResponse,
    stimulus: jsPsych.timelineVariable('stimulus'),
    choices: ['r', 'b'],
    button_html: ['<button class="buttonRed" style="height:90px;width:110px"></button>', '<button class="buttonBlue" style="height:90px;width:110px"></button>'],
    response_ends_trial: true,
    data: {
        task: 'response',
    },

    on_finish: function(data){
      data.response === data.correct_response ? data.correct = true : data.correct = false;
      }

};

var practice = {
    type: jsPsychHtmlButtonResponse,
    stimulus: jsPsych.timelineVariable('stimulus'),
    choices: ['r', 'b'],
    button_html: ['<button class="buttonRed" style="height:90px;width:110px"></button>', '<button class="buttonBlue" style="height:90px;width:110px"></button>'],
    response_ends_trial: true,
    data: {
        task: 'response',
    },
    on_finish: function(data){
        data.response === data.correct_response ? data.correct = true : data.correct = false;
      }

};

var practiceProcedure = {
    timeline: [blank1, fixation, blank2, practice],
    timeline_variables: practiceStimuli,
    randomize_order: true,
    repetitions: 2,
  }

var testProcedure = {
    timeline: [blank1, fixation, blank2, stroop],
    timeline_variables: stroopStimuli,
    randomize_order: true,
  }

  timeline.push(practice_instructions_1);
  timeline.push(practice_instructions_2);
  timeline.push(practiceProcedure);
  timeline.push(task_instructions);
  timeline.push(testProcedure);

    /*start task*/
      jsPsych.run(timeline);
    

  </script>
</html>
